<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TINSFLASH – La météo 1000% réelle</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="loader.css">
  <link rel="stylesheet" href="radar.css">
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
  <script defer src="app.js"></script>
  <script defer src="loader.js"></script>
  <script defer src="radar.js"></script>
</head>
<body>
  <!-- 🎬 Intro vidéo -->
  <section class="intro-video">
    <video autoplay muted playsinline id="intro-jean">
      <source src="intro-jean.mp4" type="video/mp4">
      Votre navigateur ne supporte pas la vidéo.
    </video>
    <div class="intro-overlay">
      <h1>🌍 TINSFLASH</h1>
      <p>La météo 1000% réelle, fonctionnelle et connectée</p>
      <div class="intro-buttons">
        <button onclick="toggleSound()" id="sound-btn">🔊 Activer le son</button>
        <button onclick="skipIntro()">⏭️ Passer l’intro</button>
      </div>
    </div>
  </section>

  <!-- 🌤️ Contenu principal -->
  <header>
    <h1>Prévisions Météo TINSFLASH</h1>
  </header>

  <main>
    <!-- 📍 Prévisions locales -->
    <section class="forecast-section">
      <h2>📍 Prévisions locales</h2>
      <div id="local-loader" class="loader-container"></div>
      <div id="local-content" class="forecast-box neon-card"></div>
    </section>

    <!-- 🌍 Prévisions nationales -->
    <section class="forecast-section">
      <h2>🌍 Prévisions nationales</h2>
      <div id="national-loader" class="loader-container"></div>
      <div id="national-content" class="forecast-box neon-card"></div>
    </section>

    <!-- 📅 Prévisions 7 jours -->
    <section class="forecast-section">
      <h2>📅 Prévisions sur 7 jours</h2>
      <div id="days-loader" class="loader-container"></div>
      <div id="days-container" class="days-grid"></div>
    </section>

    <!-- 🛰️ Radar météo mondial -->
    <section class="forecast-section">
      <h2>🌍 Radar météo mondial</h2>
      <div id="radar-loader" class="loader-container"></div>
      <div id="radar-content"></div>
    </section>

    <!-- ⚠️ Alertes -->
    <section class="forecast-section">
      <h2>⚠️ Alertes</h2>
      <div id="alerts-loader" class="loader-container"></div>
      <div id="alerts" class="forecast-box neon-card"></div>
    </section>

    <!-- 🎙️ Podcasts -->
    <section class="forecast-section">
      <h2>🎙️ Podcasts</h2>
      <div id="podcasts-loader" class="loader-container"></div>
      <div id="podcasts" class="forecast-box neon-card"></div>
    </section>
  </main>

  <!-- Bandeau pub -->
  <aside class="ads">
    <p>[ Google Ads ici ]</p>
  </aside>

  <footer>
    <p>🚀 TINSFLASH 2025 – La machine météo mondiale</p>
  </footer>

  <!-- Scripts -->
  <script>
    // 🎬 Vidéo Intro
    function toggleSound() {
      const video = document.getElementById("intro-jean");
      const btn = document.getElementById("sound-btn");
      if (video.muted) {
        video.muted = false;
        btn.textContent = "🔇 Couper le son";
      } else {
        video.muted = true;
        btn.textContent = "🔊 Activer le son";
      }
    }

    function skipIntro() {
      const video = document.getElementById("intro-jean");
      video.pause();
      document.querySelector(".intro-video").style.display = "none";
    }

    // 🚀 Loaders + données météo
    window.addEventListener("DOMContentLoaded", () => {
      const localLoader = startLoader("local-loader", 2500);
      loadLocalForecast().then(() => localLoader.stop());

      const nationalLoader = startLoader("national-loader", 2500);
      loadNationalForecast("BE").then(() => nationalLoader.stop());

      const daysLoader = startLoader("days-loader", 2500);
      loadSevenDays().then(() => daysLoader.stop());

      const radarLoader = startLoader("radar-loader", 2500);
      loadRadar().then(() => radarLoader.stop());

      const alertsLoader = startLoader("alerts-loader", 2500);
      loadAlerts().then(() => alertsLoader.stop());

      const podcastsLoader = startLoader("podcasts-loader", 2500);
      loadPodcasts().then(() => podcastsLoader.stop());
    });
  </script>
</body>
</html>
