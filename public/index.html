<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸŒ TINSFLASH - PrÃ©visions mÃ©tÃ©o</title>

  <!-- Styles globaux -->
  <link rel="stylesheet" href="style.css" />

  <!-- Loader -->
  <link rel="stylesheet" href="loader.css" />

  <!-- Radar Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6828365665232268"
     crossorigin="anonymous"></script>
</head>
<body>
  <header>
    <h1>ğŸŒ TINSFLASH</h1>
    <p>La mÃ©tÃ©o 1000% rÃ©elle, fonctionnelle et connectÃ©e</p>
  </header>

  <!-- ğŸ“ PrÃ©visions locales -->
  <section id="forecast-local" class="section">
    <h2>ğŸ“ PrÃ©visions locales</h2>
    <div id="local-loader" class="loader-container"></div>
    <div id="local-content" class="forecast-card">
      â³ Chargement des prÃ©visions locales...
    </div>
  </section>

  <!-- ğŸ‡§ğŸ‡ª PrÃ©visions nationales -->
  <section id="forecast-national" class="section">
    <h2>ğŸ‡§ğŸ‡ª PrÃ©visions nationales</h2>
    <div id="national-loader" class="loader-container"></div>
    <div id="national-content" class="forecast-card">
      â³ Chargement des prÃ©visions nationales...
    </div>
  </section>

  <!-- ğŸ“… PrÃ©visions 7 jours -->
  <section id="forecast-7days" class="section">
    <h2>ğŸ“… PrÃ©visions sur 7 jours</h2>
    <div id="days-loader" class="loader-container"></div>
    <div id="days-container" class="days-grid">
      â³ Chargement des prÃ©visions Ã  7 jours...
    </div>
    <!-- Texte mÃ©tÃ©o automatique -->
    <div id="forecast-text" class="forecast-text">
      âœï¸ PrÃ©visions dÃ©taillÃ©es en cours de gÃ©nÃ©ration...
    </div>
  </section>

  <!-- ğŸ”Š Podcast mÃ©tÃ©o -->
  <section id="podcast-section" class="section">
    <h2>ğŸ§ Podcast mÃ©tÃ©o</h2>
    <button id="play-podcast">â–¶ï¸ Ã‰couter la mÃ©tÃ©o du jour</button>
    <audio id="podcast-audio" controls style="display:none;"></audio>
  </section>

  <!-- âš ï¸ Alertes mÃ©tÃ©o -->
  <section id="alerts-section" class="section">
    <h2>âš ï¸ Alertes mÃ©tÃ©o</h2>
    <div id="alerts-loader" class="loader-container"></div>
    <div id="alerts" class="alerts-container">
      â³ Chargement des alertes mÃ©tÃ©o...
    </div>
  </section>

  <!-- ğŸŒ Radar mÃ©tÃ©o -->
  <section id="radar-section" class="section">
    <h2>ğŸŒ Radar mÃ©tÃ©o</h2>
    <div id="radar-loader" class="loader-container"></div>
    <div id="radar" class="radar-container">
      â³ Chargement du radar...
    </div>
  </section>

  <!-- Bandeau pub -->
  <section class="ads-section">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-6828365665232268"
         data-ad-slot="1234567890"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </section>

  <footer>
    <p>Â© 2025 ğŸŒ TINSFLASH | La mÃ©tÃ©o qui donne des frissons Ã  la NASA ğŸš€</p>
  </footer>

  <!-- Scripts -->
  <script src="loader.js"></script>
  <script src="app.js"></script>
  <script src="radar.js"></script>

  <script>
    // ğŸ¬ Lancement des loaders + prÃ©visions
    startLoader("local-loader", () => loadLocalForecast());
    startLoader("national-loader", () => loadNationalForecast());
    startLoader("days-loader", () => load7DaysForecast());
    startLoader("alerts-loader", () => loadAlerts());
    startLoader("radar-loader", () => loadRadar());

    // ğŸ§ Gestion du podcast
    document.getElementById("play-podcast").addEventListener("click", async () => {
      const res = await fetch("/api/podcast/generate?type=daily");
      const data = await res.json();
      const audio = document.getElementById("podcast-audio");
      audio.src = data.url || data.file || "";
      audio.style.display = "block";
      audio.play();
    });
  </script>
</body>
</html>
