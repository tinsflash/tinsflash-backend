<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TINSFLASH ‚Äì La m√©t√©o ultra fiable par Syst√®me J.E.A.N</title>
  <meta name="description" content="TINSFLASH ‚Äì La m√©t√©o la plus pr√©cise du monde, avec pr√©visions IA, alertes locales et radar en direct." />
  <link rel="icon" href="favicon.ico" />

  <!-- ‚úÖ Validation Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8204947691352732"
       crossorigin="anonymous"></script>

  <!-- ‚úÖ Styles -->
  <style>
    body {
      font-family: 'Segoe UI', Roboto, sans-serif;
      background: #0d1117;
      color: #e6e6e6;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      background: #0078d7;
      color: white;
      padding: 0.5em 0;
      font-weight: bold;
      font-size: 1.4em;
    }
    video {
      width: 100%;
      max-height: 260px;
      object-fit: cover;
      border-bottom: 3px solid #0078d7;
    }
    section {
      background: #161b22;
      margin: 12px;
      border-radius: 12px;
      padding: 14px;
      box-shadow: 0 0 8px rgba(0,0,0,0.4);
    }
    h2 {
      color: #58a6ff;
      font-size: 1.3em;
    }
    button, input[type="text"] {
      border-radius: 8px;
      padding: 8px 10px;
      border: none;
      margin: 6px;
    }
    button {
      background: #0078d7;
      color: white;
      font-weight: bold;
    }
    .ads { margin: 18px auto; text-align:center; }
    .premium-float {
      position: fixed;
      bottom: 80px;
      left: 10px;
      background: #0a84ff;
      color: white;
      padding: 10px 16px;
      border-radius: 16px;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
      cursor: pointer;
      animation: blink 2s infinite;
      font-weight: bold;
    }
    @keyframes blink {
      0%, 50%, 100% { opacity: 1; }
      25%, 75% { opacity: 0.6; }
    }
    .jean-avatar {
      position: fixed;
      bottom: 15px;
      right: 15px;
      width: 80px;
      height: 80px;
      cursor: pointer;
      border-radius: 50%;
      background: url("jean-avatar.png") no-repeat center/cover;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }
    #chatBox {
      display: none;
      position: fixed;
      bottom: 110px;
      right: 20px;
      width: 300px;
      background: #161b22;
      border-radius: 10px;
      border: 1px solid #30363d;
      padding: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }
    #chatMessages {
      height: 200px;
      overflow-y: auto;
      text-align: left;
      font-size: 0.9em;
      margin-bottom: 8px;
    }
    footer {
      background: #0d1117;
      padding: 15px;
      font-size: 0.85em;
      color: #999;
    }
  </style>
</head>

<body>
  <header>
    üåç TINSFLASH  
    <div style="font-size:0.8em;">la m√©t√©o enfin ultra fiable ‚Äì Syst√®me J.E.A.N</div>
  </header>

  <!-- üé¨ Bandeau vid√©o -->
  <video autoplay muted loop playsinline>
    <source src="intro-jean.mp4" type="video/mp4" />
  </video>

  <!-- üß≠ Pr√©sentation -->
  <section>
    <h2>üîç √Ä propos de TINSFLASH</h2>
    <p>TINSFLASH combine mod√®les physiques, IA, relief et satellites pour fournir les pr√©visions les plus fiables au monde.
    Chaque utilisateur re√ßoit des alertes pr√©cises et des pr√©visions avanc√©es, adapt√©es √† sa localisation.</p>
  </section>

  <!-- üìç Localisation -->
  <section id="loc">
    <h2>üìç Localisation</h2>
    <button onclick="getLocation()">üì° Activer la g√©olocalisation</button><br/>
    <input type="text" id="manualAddress" placeholder="Rue + Ville">
    <button onclick="manualWeather()">Voir la m√©t√©o</button>
    <p id="zoneMessage"></p>
  </section>

  <!-- üåû M√©t√©o du jour -->
  <section id="meteoJour">
    <h2>üåû M√©t√©o du jour</h2>
    <div id="weatherToday">‚è≥ Chargement...</div>
  </section>

  <!-- üìÖ Pr√©visions 7 jours -->
  <section id="meteo7">
    <h2>üìÜ Pr√©visions 7 jours</h2>
    <div id="weather7">‚è≥ Chargement...</div>
  </section>

  <!-- üí∞ Publicit√© Milieu -->
  <div class="ads">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6828365665232268"
         crossorigin="anonymous"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-6828365665232268"
         data-ad-slot="5574293942"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <!-- ‚ö†Ô∏è Alertes -->
  <section id="alertes">
    <h2>‚ö†Ô∏è Alertes m√©t√©o</h2>
    <div id="alertList">‚è≥ Chargement...</div>
  </section>

  <!-- üì∞ Bulletin m√©t√©o auto -->
  <section id="bulletin">
    <h2>üì∞ Bulletin m√©t√©o</h2>
    <p id="bulletinText">‚è≥ G√©n√©ration du bulletin...</p>
  </section>

  <!-- üåßÔ∏è Radar -->
  <section>
    <h2>üå¶Ô∏è Radar en direct</h2>
    <iframe src="https://embed.windy.com/embed2.html?lat=50.5&lon=4.5&zoom=5&level=surface&overlay=rain&menu=&message=true"
      frameborder="0" width="100%" height="400"></iframe>
  </section>

  <!-- üí∞ Publicit√© Bas -->
  <div class="ads">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6828365665232268"
         crossorigin="anonymous"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-6828365665232268"
         data-ad-slot="8607759190"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <!-- ü§ñ Chat J.E.A.N -->
  <div class="jean-avatar" onclick="toggleChat()"></div>
  <div id="chatBox">
    <div id="chatMessages"></div>
    <input type="text" id="chatInput" placeholder="Posez une question..." style="width:75%">
    <button onclick="sendChat()">Envoyer</button>
  </div>

  <!-- ‚≠ê Popup Premium/Pro -->
  <div class="premium-float" onclick="showPremium()">‚≠ê Passez Premium / Pro</div>
  <div id="premiumPopup" style="display:none;position:fixed;bottom:120px;left:20px;background:#161b22;border-radius:12px;padding:15px;box-shadow:0 0 10px #000;">
    <h3>üéÅ D√©bloquez plus de puissance m√©t√©o !</h3>
    <p>Profitez de 7 jours gratuits sur chaque formule.</p>
    <a href="https://buy.stripe.com/cNiaEZgK5bpffuRex3gfu00" target="_blank"><button>üåü Premium ‚Äì 5,99‚Ç¨/mois</button></a><br/>
    <a href="https://buy.stripe.com/dRm4gBeBX9h782p74Bgfu01" target="_blank"><button>üöÄ Pro ‚Äì 14,99‚Ç¨/mois</button></a><br/>
    <button onclick="hidePremium()">Fermer</button>
  </div>

  <!-- ü¶∏ Footer -->
  <footer>
    ¬© 2025 TINSFLASH ‚Äì Tous droits r√©serv√©s<br>
    üìß skysnapia@gmail.com | üì± +32 473 26 44 77
  </footer>

  <!-- ‚úÖ Scripts -->
  <script>
    // --- GEOLOCATION ---
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(pos => {
          fetch(`/api/status`)
            .then(res => res.json())
            .then(data => {
              document.getElementById('zoneMessage').innerText = data.status === "ok"
                ? "‚úÖ Zone couverte : pr√©visions locales activ√©es."
                : "üåç Votre pays re√ßoit les alertes globales. Passez Pro pour d√©bloquer les pr√©visions IA.";
            });
        });
      }
    }
    function manualWeather() {
      document.getElementById('zoneMessage').innerText = "üîé Recherche m√©t√©o pour " + document.getElementById('manualAddress').value + "...";
    }

    // --- CHAT J.E.A.N ---
    function toggleChat() {
      const box = document.getElementById('chatBox');
      box.style.display = box.style.display === "none" ? "block" : "none";
    }
    async function sendChat() {
      const msg = document.getElementById('chatInput').value.trim();
      if (!msg) return;
      const chatMessages = document.getElementById('chatMessages');
      chatMessages.innerHTML += "<b>Moi:</b> " + msg + "<br/>";
      document.getElementById('chatInput').value = "";
      const res = await fetch('/api/jean', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({message: msg})
      });
      const data = await res.json();
      chatMessages.innerHTML += "<b>J.E.A.N:</b> " + data.reply + "<br/>";
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // --- PREMIUM POPUP ---
    function showPremium(){ document.getElementById('premiumPopup').style.display='block'; }
    function hidePremium(){ document.getElementById('premiumPopup').style.display='none'; }
  </script>
</body>
</html>
