<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="noindex,nofollow">
  <title>Admin – Radar & News</title>
  <style>
    body{font-family:Arial,sans-serif;background:#0b0e12;color:#eee;margin:0;}
    header{background:#1c1f26;padding:15px;text-align:center;}
    h1{margin:0;color:#00d8ff;}
    nav{background:#1c1f26;padding:10px;display:flex;justify-content:center;gap:20px;}
    nav a{color:#00d8ff;text-decoration:none;font-weight:bold;padding:6px 12px;border-radius:6px;}
    nav a:hover{background:#00d8ff;color:#000;}
    iframe{width:100%;height:70vh;border:none;}
    .news{padding:15px;}
  </style>
</head>
<body>
<script>
  const pass=prompt("Code d'accès ?"); 
  if(pass!=="202679"){document.body.innerHTML="<h1 style='color:red;text-align:center;'>⛔ Accès refusé</h1>";throw new Error("Accès refusé");}
</script>

<header><h1>🛰️ Radar & News</h1></header>

<nav>
  <a href="/admin-pp.html">🏠 Console</a>
  <a href="/admin-chat.html">🤖 Chat IA</a>
  <a href="/admin-alerts.html">🚨 Alertes</a>
  <a href="/admin-index.html">👁️ Vue Index</a>
  <a href="/admin-radar.html">🛰️ Radar & News</a>
</nav>

<iframe src="https://embed.windy.com/embed2.html?lat=50&lon=4&zoom=5&level=surface&overlay=rain&menu=&message=true"></iframe>

<div class="news">
  <h2>📰 Fil news météo</h2>
  <div id="newsFeed">Chargement...</div>
</div>

<script>
async function loadNews(){
  const res=await fetch("/api/news");
  const data=await res.json();
  const box=document.getElementById("newsFeed");
  box.innerHTML="";
  data.forEach(n=>{
    const d=document.createElement("div");
    d.style="margin-bottom:10px;padding:8px;border-bottom:1px solid #333;";
    d.innerHTML=`<b>${n.title}</b><br/>${n.summary}`;
    box.appendChild(d);
  });
}
setInterval(loadNews,120000); loadNews();
</script>
</body>
</html>
