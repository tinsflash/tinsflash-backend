<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>üõ∞Ô∏è Console Admin ‚Äì Radar + News</title>
  <meta name="robots" content="noindex,nofollow">
  <style>
    body { font-family: Arial, sans-serif; background:#111; color:#eee; margin:0; }
    header { background:#222; padding:10px; display:flex; justify-content:space-between; align-items:center; }
    header h1 { margin:0; font-size:18px; color:#fdd835; }
    nav a { color:#0af; margin:0 10px; text-decoration:none; font-weight:bold; }
    nav a:hover { text-decoration:underline; }
    .container { padding:0; }
    iframe { width:100%; height:60vh; border:none; }
    .news { padding:20px; }
    .news h2 { color:#fdd835; }
    .newsItem { margin:10px 0; padding:10px; border:1px solid #444; border-radius:5px; background:#222; }
  </style>
</head>
<body>
<script>
  const pass = prompt("Mot de passe ?");
  if (pass !== "202679") {
    document.body.innerHTML = "<h1 style='color:red;text-align:center;'>‚õî Acc√®s refus√©</h1>";
    throw new Error("Acc√®s refus√©");
  }
</script>

<header>
  <h1>üõ∞Ô∏è Radar Global + News ‚Äì Console Admin</h1>
  <nav>
    <a href="admin-pp.html">Console</a>
    <a href="admin-alerts.html">Alertes</a>
    <a href="admin-index.html">Vue Utilisateur</a>
    <a href="admin-chat.html">Chat IA</a>
    <a href="admin-radar.html">Radar + News</a>
  </nav>
</header>

<div class="container">
  <!-- Radar -->
  <iframe src="https://embed.windy.com/embed2.html?lat=50&lon=5&zoom=4&level=surface&overlay=rain&menu=&message=true&marker=&calendar=now&pressure=true&type=map&location=coordinates&detail=&detailLat=50&detailLon=5&metricWind=default&metricTemp=default&radarRange=-1" loading="lazy"></iframe>

  <!-- News -->
  <div class="news">
    <h2>üåç Actualit√©s m√©t√©o mondiales</h2>
    <div id="newsList">Chargement des actualit√©s‚Ä¶</div>
  </div>
</div>

<script>
  async function loadNews() {
    try {
      const res = await fetch("/api/news");
      const data = await res.json();
      const list = document.getElementById("newsList");
      list.innerHTML = "";
      if (data && data.news && Array.isArray(data.news)) {
        data.news.forEach(n => {
          const div = document.createElement("div");
          div.className = "newsItem";
          div.innerHTML = `<b>${n.title || "Sans titre"}</b><br>${n.summary || ""}`;
          list.appendChild(div);
        });
      } else {
        list.innerHTML = "<i>Aucune actualit√© disponible</i>";
      }
    } catch (err) {
      document.getElementById("newsList").innerHTML =
        "<span style='color:red;'>Erreur chargement news: " + err.message + "</span>";
    }
  }
  loadNews();
</script>
</body>
</html>
