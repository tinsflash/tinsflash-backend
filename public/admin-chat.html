<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="noindex,nofollow">
  <title>Admin – Chat IA</title>
  <style>
    body { font-family: Arial, sans-serif; background:#0b0e12; color:#eee; margin:0; }
    header { background:#1c1f26; padding:15px; text-align:center; }
    h1 { margin:0; color:#00d8ff; }
    nav { background:#1c1f26; padding:10px; display:flex; justify-content:center; gap:20px; }
    nav a { color:#00d8ff; text-decoration:none; font-weight:bold; padding:6px 12px; border-radius:6px; }
    nav a:hover { background:#00d8ff; color:#000; }
    #chatbox { max-height:400px; overflow-y:auto; padding:10px; background:#111; margin:15px; border-radius:8px; }
    .msg { margin:8px 0; padding:10px; border-radius:8px; }
    .user { background:#00d8ff; color:#000; text-align:right; }
    .ai { background:#1c1f26; color:#fff; }
    #input { width:80%; padding:10px; }
    #send { padding:10px; }
  </style>
</head>
<body>
<script>
  const pass=prompt("Code d'accès ?"); 
  if(pass!=="202679"){document.body.innerHTML="<h1 style='color:red;text-align:center;'>⛔ Accès refusé</h1>";throw new Error("Accès refusé");}
</script>

<header><h1>🤖 Chat IA – Moteur & Météo/Climat</h1></header>

<nav>
  <a href="/admin-pp.html">🏠 Console</a>
  <a href="/admin-chat.html">🤖 Chat IA</a>
  <a href="/admin-alerts.html">🚨 Alertes</a>
  <a href="/admin-index.html">👁️ Vue Index</a>
  <a href="/admin-radar.html">🛰️ Radar & News</a>
</nav>

<div id="chatbox"></div>
<div style="text-align:center;">
  <input id="input" placeholder="Pose ta question à l’IA…" />
  <button id="send">Envoyer</button>
</div>

<script>
const chatbox=document.getElementById("chatbox");
function addMsg(text,cls){const d=document.createElement("div");d.className="msg "+cls;d.innerText=text;chatbox.appendChild(d);chatbox.scrollTop=chatbox.scrollHeight;}
document.getElementById("send").onclick=async ()=>{
  const q=document.getElementById("input").value;
  if(!q) return;
  addMsg(q,"user"); document.getElementById("input").value="";
  const res=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:q})});
  const data=await res.json();
  addMsg(data.reply||"❌ Erreur IA","ai");
};
</script>
</body>
</html>
