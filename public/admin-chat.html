<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>üí¨ Console Admin ‚Äì Chat IA</title>
  <meta name="robots" content="noindex,nofollow">
  <style>
    body { font-family: Arial, sans-serif; background:#111; color:#eee; margin:0; }
    header { background:#222; padding:10px; display:flex; justify-content:space-between; align-items:center; }
    header h1 { margin:0; font-size:18px; color:#0af; }
    nav a { color:#0af; margin:0 10px; text-decoration:none; font-weight:bold; }
    nav a:hover { text-decoration:underline; }
    .container { padding:20px; }
    .chatbox { background:#222; padding:10px; height:300px; overflow-y:auto; border:1px solid #444; }
    .msg { margin:5px 0; }
    input, button { padding:10px; }
  </style>
</head>
<body>
<script>
  const pass = prompt("Mot de passe ?");
  if (pass !== "202679") {
    document.body.innerHTML = "<h1 style='color:red;text-align:center;'>‚õî Acc√®s refus√©</h1>";
    throw new Error("Acc√®s refus√©");
  }
</script>

<header>
  <h1>üí¨ Chat IA ‚Äì Console Admin</h1>
  <nav>
    <a href="admin-pp.html">Console</a>
    <a href="admin-alerts.html">Alertes</a>
    <a href="admin-index.html">Vue Utilisateur</a>
    <a href="admin-chat.html">Chat IA</a>
    <a href="admin-radar.html">Radar</a>
  </nav>
</header>

<div class="container">
  <div class="chatbox" id="chat"></div>
  <input id="question" placeholder="Posez une question m√©t√©o‚Ä¶">
  <button onclick="ask()">Envoyer</button>
</div>

<script>
  async function ask() {
    const q = document.getElementById("question").value;
    const chat = document.getElementById("chat");
    chat.innerHTML += `<div class="msg">üßë‚Äçüíª ${q}</div>`;
    document.getElementById("question").value = "";

    try {
      const res = await fetch("/api/chat/engine", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ question: q })
      });
      const data = await res.json();
      chat.innerHTML += `<div class="msg">ü§ñ ${data.answer || JSON.stringify(data)}</div>`;
    } catch (err) {
      chat.innerHTML += `<div class="msg" style="color:red;">Erreur: ${err.message}</div>`;
    }
  }
</script>
</body>
</html>
