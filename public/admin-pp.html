<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‚ö° Centrale Nucl√©aire M√©t√©o ‚Äî Console Admin</title>
  <style>
    body {
      background: black;
      color: lime;
      font-family: monospace;
      padding: 10px;
    }
    h1, h2 {
      color: cyan;
    }
    section {
      border: 1px solid lime;
      margin: 15px 0;
      padding: 10px;
      border-radius: 8px;
    }
    button {
      background: lime;
      color: black;
      font-weight: bold;
      padding: 6px 12px;
      margin: 5px 0;
      border-radius: 4px;
      cursor: pointer;
    }
    pre {
      background: black;
      color: lime;
      padding: 10px;
      border-radius: 8px;
      max-height: 300px;
      overflow: auto;
    }
  </style>
</head>
<body>
  <h1>‚ö° Centrale Nucl√©aire M√©t√©o ‚Äî Console Admin</h1>

  <!-- ============================= -->
  <!-- üöÄ D√©marrage Global -->
  <!-- ============================= -->
  <section>
    <h2>üöÄ D√©marrer TOUT (global)</h2>
    <p>POST <code>/api/run-global</code></p>
    <button onclick="runGlobal()">D√©marrer TOUT</button>
    <pre id="runGlobalOutput"></pre>
  </section>

  <!-- ============================= -->
  <!-- üìú Logs moteur -->
  <!-- ============================= -->
  <section>
    <h2>üìú Logs moteur</h2>
    <p>GET <code>/api/logs</code></p>
    <button onclick="getLogs()">Activer</button>
    <pre id="logsOutput"></pre>
  </section>

  <!-- ============================= -->
  <!-- üîß √âtat du moteur -->
  <!-- ============================= -->
  <section>
    <h2>üîß √âtat du moteur</h2>
    <p>GET <code>/api/checkup</code></p>
    <button onclick="getCheckup()">V√©rifier</button>
    <pre id="checkupOutput"></pre>
  </section>

  <!-- ============================= -->
  <!-- ‚ö†Ô∏è Alertes m√©t√©o -->
  <!-- ============================= -->
  <section>
    <h2>‚ö†Ô∏è Alertes m√©t√©o</h2>
    <p>GET <code>/api/alerts</code></p>
    <button onclick="getAlerts()">Charger</button>
    <pre id="alertsOutput"></pre>
  </section>

  <!-- ============================= -->
  <!-- üåç Radar m√©t√©o global -->
  <!-- ============================= -->
  <section>
    <h2>üåç Radar m√©t√©o global</h2>
    <p>GET <code>/api/radar/global</code></p>
    <button onclick="getRadar()">Afficher</button>
    <pre id="radarOutput"></pre>
  </section>

  <!-- ============================= -->
  <!-- ü§ñ Chat IA ‚Äî Moteur m√©t√©o -->
  <!-- ============================= -->
  <section>
    <h2>ü§ñ Chat IA ‚Äî Moteur m√©t√©o nucl√©aire</h2>
    <p>POST <code>/api/chat</code></p>
    <textarea id="chatMessage" rows="2" style="width:100%;"></textarea><br/>
    <button onclick="sendChat()">Envoyer</button>
    <pre id="chatOutput"></pre>
  </section>

  <!-- ============================= -->
  <!-- ‚úÖ V√©rification compl√®te moteur -->
  <!-- ============================= -->
  <section>
    <h2>‚úÖ V√©rification compl√®te moteur</h2>
    <p>GET <code>/api/verify-all</code></p>
    <button onclick="verifyAll()">V√©rifier tout</button>
    <pre id="verifyOutput"></pre>
  </section>

  <script>
    async function runGlobal() {
      const res = await fetch("/api/run-global", { method: "POST" });
      const data = await res.json();
      document.getElementById("runGlobalOutput").textContent = JSON.stringify(data, null, 2);
    }

    async function getLogs() {
      const res = await fetch("/api/logs");
      const data = await res.json();
      document.getElementById("logsOutput").textContent = JSON.stringify(data, null, 2);
    }

    async function getCheckup() {
      const res = await fetch("/api/checkup");
      const data = await res.json();
      document.getElementById("checkupOutput").textContent = JSON.stringify(data, null, 2);
    }

    async function getAlerts() {
      const res = await fetch("/api/alerts");
      const data = await res.json();
      document.getElementById("alertsOutput").textContent = JSON.stringify(data, null, 2);
    }

    async function getRadar() {
      const res = await fetch("/api/radar/global");
      const data = await res.json();
      document.getElementById("radarOutput").textContent = JSON.stringify(data, null, 2);
    }

    async function sendChat() {
      const msg = document.getElementById("chatMessage").value;
      const res = await fetch("/api/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: msg, country: "BE" })
      });
      const data = await res.json();
      document.getElementById("chatOutput").textContent =
        typeof data.reply === "string" ? data.reply : JSON.stringify(data.reply, null, 2);
    }

    async function verifyAll() {
      try {
        const res = await fetch("/api/verify-all");
        const data = await res.json();
        document.getElementById("verifyOutput").textContent =
          typeof data.reply === "string"
            ? data.reply
            : JSON.stringify(data.reply, null, 2);
      } catch (err) {
        document.getElementById("verifyOutput").textContent =
          "‚ùå Erreur v√©rification moteur : " + err.message;
      }
    }
  </script>
</body>
</html>
