<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>TINSFLASH ‚Äì Console Administrateur</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      background: #0d0d0d;
      color: #e0e0e0;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      background: #111;
      padding: 10px 20px;
      font-size: 18px;
      font-weight: bold;
      border-bottom: 2px solid #222;
    }
    nav {
      display: flex;
      gap: 10px;
      background: #1a1a1a;
      padding: 8px;
    }
    nav button {
      background: #222;
      color: #eee;
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
    }
    nav button:hover {
      background: #333;
    }
    .container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      padding: 15px;
    }
    .card {
      background: #1a1a1a;
      border-radius: 10px;
      padding: 12px;
      box-shadow: 0 0 6px rgba(0,0,0,0.5);
    }
    .scroll-box {
      max-height: 250px;
      overflow-y: auto;
      background: #111;
      padding: 10px;
      border-radius: 8px;
      font-family: monospace;
      white-space: pre-wrap;
    }
    .checkup-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .check-item {
      padding: 8px;
      border-radius: 6px;
      font-size: 14px;
    }
    .ok { background: #133d13; border-left: 5px solid #4CAF50; }
    .ko { background: #3d1313; border-left: 5px solid #F44336; }
    .warn { background: #3d3213; border-left: 5px solid #FF9800; }
    .unknown { background: #262626; border-left: 5px solid #888; }
    .section-title {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 6px;
    }
    .btn {
      margin: 3px;
      padding: 8px 12px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
    }
    .btn-primary { background: #1976d2; color: #fff; }
    .btn-secondary { background: #388e3c; color: #fff; }
    .btn-danger { background: #d32f2f; color: #fff; }
    .copy-btn {
      background: #444;
      color: #fff;
      border: none;
      padding: 4px 8px;
      font-size: 12px;
      border-radius: 4px;
      cursor: pointer;
      float: right;
    }
  </style>
</head>
<body>
  <header>‚ö° TINSFLASH ‚Äì Console Administrateur</header>

  <nav>
    <button onclick="showTab('dashboard')">Dashboard</button>
    <button onclick="showTab('alertes')">Alertes</button>
    <button onclick="showTab('vueuser')">Vue utilisateur</button>
    <button onclick="showTab('chat')">Chat IA (moteur)</button>
    <button onclick="showTab('radar')">Outils & Radar</button>
    <button onclick="showTab('news')">Actualit√©s</button>
  </nav>

  <!-- Dashboard -->
  <section id="dashboard" class="tab">
    <div class="container">
      <div class="card">
        <div class="section-title">üöÄ Lancer le moteur</div>
        <button class="btn btn-primary" onclick="runGlobal()">RUN GLOBAL (zones couvertes)</button>
        <button class="btn btn-secondary" onclick="runContinental()">RUN CONTINENTAL (non couvertes)</button>
        <button class="btn btn-danger" onclick="checkIA()">V√©rifier (IA)</button>
        <div class="scroll-box" id="runResult">R√©sultat du run affich√© ici‚Ä¶</div>
      </div>

      <div class="card">
        <div class="section-title">üß† Checkup 13 points</div>
        <div id="checkup" class="checkup-list">
          <!-- Dynamique -->
        </div>
      </div>

      <div class="card">
        <div class="section-title">üìú Logs (moteur & admin)</div>
        <button class="copy-btn" onclick="copyLogs()">Copier tout</button>
        <div class="scroll-box" id="logsBox">Aucun log.</div>
      </div>

      <div class="card">
        <div class="section-title">üß© √âtat & Utilisateurs</div>
        <div id="etatBox">Moteur: actif<br>IA: inconnue<br>Radar: inactif<br>Alertes: inconnu</div>
        <div id="usersBox" class="scroll-box">Pas de donn√©es utilisateurs‚Ä¶</div>
      </div>
    </div>
  </section>

  <!-- Alertes -->
  <section id="alertes" class="tab" style="display:none;">
    <div class="card">
      <div class="section-title">‚ö†Ô∏è Gestion des alertes (automatiques & √† valider)</div>
      <div class="scroll-box" id="alertsBox">Chargement alertes‚Ä¶</div>
    </div>
  </section>

  <!-- Vue utilisateur -->
  <section id="vueuser" class="tab" style="display:none;">
    <div class="card">
      <div class="section-title">üë§ Vue Utilisateur</div>
      <div class="scroll-box" id="userView">Pr√©visualisation page index utilisateur‚Ä¶</div>
    </div>
  </section>

  <!-- Chat IA -->
  <section id="chat" class="tab" style="display:none;">
    <div class="card">
      <div class="section-title">üí¨ Chat IA (moteur)</div>
      <div class="scroll-box" id="chatHistory">Historique vide‚Ä¶</div>
      <input type="text" id="chatInput" placeholder="Posez une question‚Ä¶" style="width:80%;">
      <button class="btn btn-primary" onclick="askIA()">Envoyer</button>
    </div>
  </section>

  <!-- Radar -->
  <section id="radar" class="tab" style="display:none;">
    <div class="card">
      <div class="section-title">üåç Outils & Radar</div>
      <div id="radarBox">Radar global interactif ici‚Ä¶</div>
    </div>
  </section>

  <!-- Actualit√©s -->
  <section id="news" class="tab" style="display:none;">
    <div class="card">
      <div class="section-title">üì∞ Actualit√©s m√©t√©o & climat</div>
      <div class="scroll-box" id="newsBox">Chargement actualit√©s‚Ä¶</div>
    </div>
  </section>

  <script>
    function showTab(id) {
      document.querySelectorAll('.tab').forEach(tab => tab.style.display = 'none');
      document.getElementById(id).style.display = 'block';
    }

    function runGlobal() {
      document.getElementById("runResult").innerText = "RUN GLOBAL lanc√©‚Ä¶ (simulation affichage)";
      // TODO: connecter √† /api/run/global
    }

    function runContinental() {
      document.getElementById("runResult").innerText = "RUN CONTINENTAL lanc√©‚Ä¶";
      // TODO: connecter √† /api/run/continental
    }

    function checkIA() {
      document.getElementById("runResult").innerText = "V√©rification IA en cours‚Ä¶";
      // TODO: connecter √† /api/ia/check
    }

    function copyLogs() {
      const text = document.getElementById("logsBox").innerText;
      navigator.clipboard.writeText(text);
      alert("Logs copi√©s !");
    }

    function askIA() {
      const q = document.getElementById("chatInput").value;
      if (!q) return;
      const history = document.getElementById("chatHistory");
      history.innerText += "\nüë§ " + q + "\nü§ñ R√©ponse IA: (√† connecter)";
      document.getElementById("chatInput").value = "";
    }

    // Exemple checkup dynamique (√† remplacer par fetch /api/engine/state)
    const sampleCheckup = [
      {label:"1. Mod√®les OK", status:"ok"},
      {label:"2. Mod√®les non OK", status:"ko"},
      {label:"3. Sources OK", status:"ok"},
      {label:"4. Sources non OK", status:"ko"},
      {label:"5. Analyse IA pr√©visions", status:"warn"},
      {label:"6. Analyse IA alertes", status:"warn"},
      {label:"7. Pr√©visions locales (zones couvertes)", status:"ok"},
      {label:"8. Pr√©visions nationales (zones couvertes)", status:"ok"},
      {label:"9. Alertes locales (zones couvertes)", status:"ko"},
      {label:"10. Alertes nationales (zones couvertes)", status:"ko"},
      {label:"11. Alertes continentales (zones non couvertes)", status:"ko"},
      {label:"12. Assemblage alertes mondiales", status:"ko"},
      {label:"13. Open-data pr√©visions (zones non couvertes)", status:"warn"}
    ];
    const checkupBox = document.getElementById("checkup");
    sampleCheckup.forEach(item=>{
      const div = document.createElement("div");
      div.className = "check-item " + item.status;
      div.innerText = item.label;
      checkupBox.appendChild(div);
    });
  </script>
</body>
</html>
