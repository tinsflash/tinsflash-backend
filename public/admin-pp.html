<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="robots" content="noindex,nofollow"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>🚀 TINSFLASH PRO+++ • Cockpit Administrateur</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<style>
body{margin:0;background:#020b17;color:#e8f6ff;font-family:"Segoe UI",sans-serif;display:flex;min-height:100vh;}
nav{width:230px;background:#001027;flex-shrink:0;display:flex;flex-direction:column;padding:16px 0;border-right:1px solid #093c60;}
nav h1{color:#4fc3f7;text-align:center;margin:0 0 16px;font-size:1.1em;}
nav a{color:#aeeaff;text-decoration:none;padding:10px 20px;display:block;transition:.2s;}
nav a:hover{background:#032347;color:#fff;}
nav .active{background:#4fc3f7;color:#000;}
main{flex:1;padding:16px;overflow-y:auto;}
header{background:#001027;text-align:center;padding:14px;color:#4fc3f7;font-size:1.5em;text-shadow:0 0 10px #4fc3f7,0 0 20px #0288d1;margin-bottom:10px;border-radius:8px;}
h2{color:#4fc3f7;border-left:4px solid #4fc3f7;padding-left:10px;margin-top:30px;}
.phaseTitle{font-weight:bold;font-size:1.2em;color:#00ffcc;text-shadow:0 0 8px #00ffcc;margin:20px 0 8px;}
button{background:#071d34;color:#4fc3f7;border:1px solid #4fc3f7;padding:10px;margin:6px;border-radius:10px;font-weight:bold;cursor:pointer;display:flex;align-items:center;gap:6px;justify-content:center;transition:.2s;}
button:hover{background:#4fc3f7;color:#000;}
.cmd{font-size:12px;color:#888;background:#081527;padding:4px 8px;border-radius:6px;margin-bottom:10px;display:inline-block;}
.logs{background:#081527;border-radius:10px;padding:10px;height:340px;overflow-y:auto;font-family:monospace;font-size:13px;white-space:pre-wrap;border:1px solid #093c60;}
.map{height:250px;margin-top:10px;border-radius:10px;overflow:hidden;}
</style>
</head>
<body>

<script>
if(!sessionStorage.getItem("tinsflashPIN")){
 const p=prompt("Code d’accès admin ?");
 if(p!=="202679"){alert("Accès refusé");location.href="/";}
 else sessionStorage.setItem("tinsflashPIN","ok");
}
</script>

<nav>
<h1>🛰️ TINSFLASH PRO+++<br/>Menu Admin</h1>
<a href="/admin-pp.html" class="active">🏠 Tableau principal</a>
<a href="/admin-alerts.html">🚨 Alertes</a>
<a href="/admin-radar.html">🌦️ Radar IA</a>
<a href="/admin-news.html">📰 Actualités</a>
<a href="/admin-users.html">👥 Utilisateurs</a>
<a href="/">↩️ Accueil public</a>
</nav>

<main>
<header>COCKPIT ADMINISTRATEUR – IA J.E.A.N. – Moteur Central</header>

<!-- ===== PHASE 1 – Extraction ===== -->
<div class="phaseTitle">PHASE 1 – Extraction des modèles</div>

<div>
  <button onclick="run('global-europe')">🇪🇺 Europe</button>
  <div class="cmd">curl -X POST https://backend.onrender.com/api/run-global-europe</div>

  <button onclick="run('global-usa')">🇺🇸 USA</button>
  <div class="cmd">curl -X POST https://backend.onrender.com/api/run-global-usa</div>

  <button onclick="run('belgique')">🇧🇪 Belgique</button>
  <div class="cmd">curl -X POST https://backend.onrender.com/api/run-belgique</div>

  <button onclick="run('bouke')">📺 Bouké (Namur)</button>
  <div class="cmd">curl -X POST https://backend.onrender.com/api/run-bouke</div>

  <button onclick="run('afrique')">🌍 Afrique</button>
  <div class="cmd">curl -X POST https://backend.onrender.com/api/run-global-afrique</div>

  <button onclick="run('asie')">🌏 Asie</button>
  <div class="cmd">curl -X POST https://backend.onrender.com/api/run-global-asie</div>

  <button onclick="run('ameriquesud')">🌎 Amérique Sud</button>
  <div class="cmd">curl -X POST https://backend.onrender.com/api/run-global-ameriquesud</div>

  <button onclick="run('oceanie')">🌊 Océanie</button>
  <div class="cmd">curl -X POST https://backend.onrender.com/api/run-global-oceanie</div>
</div>

<!-- ===== PHASE 2 – IA J.E.A.N. ===== -->
<div class="phaseTitle">PHASE 2 – Analyse IA J.E.A.N.</div>
<button onclick="runAI()">🧠 Lancer IA J.E.A.N.</button>
<div class="cmd">curl -X POST https://backend.onrender.com/api/runAI</div>

<!-- ===== PHASE 5 – Fusion mondiale ===== -->
<div class="phaseTitle">PHASE 5 – Fusion mondiale des alertes</div>
<button onclick="runAlerts()">🚨 Fusionner toutes les alertes</button>
<div class="cmd">curl -X POST https://backend.onrender.com/api/runWorldAlerts</div>

<h2>📜 Logs en direct</h2>
<div id="logs" class="logs">Connexion en cours...</div>

<h2>🌍 Carte rapide</h2>
<div id="map" class="map"></div>

<footer style="text-align:center;color:#555;margin-top:20px;">
© 2025 – Centrale Météo IA TINSFLASH PRO+++ • Moteur J.E.A.N.
</footer>
</main>

<script>
const logs=document.getElementById("logs");
function addLog(m){logs.textContent+="\n"+new Date().toLocaleTimeString()+" "+m;logs.scrollTop=logs.scrollHeight;}
async function run(zone){addLog("▶️ "+zone);try{const r=await fetch("/api/run-"+zone,{method:"POST"});const j=await r.json();addLog("✅ "+zone+" OK: "+JSON.stringify(j));}catch(e){addLog("❌ "+zone+" "+e.message);}}
async function runAI(){try{const r=await fetch("/api/runAI",{method:"POST"});const j=await r.json();addLog("🧠 IA: "+JSON.stringify(j));}catch(e){addLog("❌ IA "+e.message);}}
async function runAlerts(){try{const r=await fetch("/api/runWorldAlerts",{method:"POST"});const j=await r.json();addLog("🚨 Fusion: "+JSON.stringify(j.summary||j));}catch(e){addLog("❌ Fusion "+e.message);}}

const map=L.map("map").setView([20,0],2);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);
</script>
</body>
</html>
