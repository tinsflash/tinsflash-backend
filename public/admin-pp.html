<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="robots" content="noindex,nofollow"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>üõ∞ Console ‚Äì TINSFLASH PRO+++</title>
<style>
body{margin:0;font-family:Inter,system-ui;background:#0b1220;color:#e6f6ff}
header{padding:12px;text-align:center;background:#08121d;color:#6bf3ff;font-weight:700;font-size:20px}
nav{display:flex;justify-content:center;gap:10px;padding:8px;background:#0d1624}
a{color:#4fc3f7;text-decoration:none;font-weight:600}
.container{max-width:1200px;margin:auto;padding:12px}
button{background:#4fc3f7;border:none;color:#001;font-weight:700;padding:10px 14px;border-radius:8px;cursor:pointer}
.card{background:#0e1721;border-radius:10px;padding:12px;margin-top:12px}
.status{float:right;font-size:0.9em}
.badge{padding:4px 8px;border-radius:6px;font-weight:700}
.badge.ok{background:#0f0;color:#000}
.badge.warn{background:#ff0;color:#000}
.badge.fail{background:#f33;color:#fff}
</style>
</head>
<body>
<script>
const PIN_ADMIN="202679";const pin=sessionStorage.getItem("tinsflashPIN");
if(!pin){const p=prompt("Code d‚Äôacc√®s admin ?");if(p!==PIN_ADMIN){alert("Acc√®s refus√©");location.href="/";}
else sessionStorage.setItem("tinsflashPIN","ok");}
</script>
<header>üõ∞ Console Moteur IA J.E.A.N <span id="statusEngine" class="status"></span></header>
<nav>
  <a href="/admin-pp.html">Console</a>
  <a href="/admin-alerts.html">Alertes</a>
  <a href="/admin-chat.html">Chat</a>
  <a href="/admin-radar.html">Radar</a>
  <a href="/admin-local.html">Local</a>
  <a href="/admin-index.html">Index</a>
  <a href="/admin-news.html">News</a>
  <a href="/admin-users.html">Utilisateurs</a>
</nav>
<div class="container">
  <div class="card">
    <h3>Contr√¥le du moteur</h3>
    <button onclick="run('Europe')">‚ö° Extraction Europe-USA-Canada</button>
    <button onclick="run('Reste')">üåç Extraction reste du monde</button>
    <button onclick="analyse()">üß† Analyse IA J.E.A.N.</button>
    <button onclick="fusion()">üì¢ Fusion analyses ‚Üí Alertes</button>
    <button onclick="stop()">‚õî Stop extraction</button>
  </div>
  <div class="card">
    <h3>Logs r√©cents</h3>
    <pre id="logs" style="background:#050a14;height:250px;overflow:auto;padding:8px;border-radius:8px"></pre>
  </div>
</div>
<script>
async function updateStatus(){
 const r=await fetch("/api/status").then(r=>r.json()).catch(()=>({status:"FAIL"}));
 const el=document.getElementById("statusEngine");
 let badge="";if(r.status?.toLowerCase().includes("ok"))badge="üü¢ OK";
 else if(r.status?.toLowerCase().includes("run"))badge="üü° En cours";
 else badge="üî¥ Inactif";
 el.innerHTML=`<span class="badge">${badge}</span> Dernier run: ${(r.lastRun||"‚Äî")}`;
}
async function run(zone){
 await fetch("/api/run-global",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({zone})});
 addLog(`Extraction ${zone} lanc√©e`);
}
async function analyse(){await fetch("/api/ai-analyse",{method:"POST"});addLog("Analyse IA lanc√©e")}
async function fusion(){await fetch("/api/runWorldAlerts",{method:"POST"});addLog("Fusion mondiale lanc√©e")}
async function stop(){await fetch("/api/stop-extraction",{method:"POST"});addLog("Extraction stopp√©e")}
function addLog(t){const l=document.getElementById("logs");l.textContent=`[${new Date().toLocaleTimeString()}] ${t}\n`+l.textContent}
setInterval(updateStatus,60000);updateStatus();
</script>
</body></html>
