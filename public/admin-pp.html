<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Centrale Nucl√©aire M√©t√©o - Admin</title>
  <style>
    body {
      background-color: #0d0d0d;
      color: #00f5d4;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      background: #111;
      padding: 20px;
      text-align: center;
      font-size: 1.5em;
      font-weight: bold;
      border-bottom: 2px solid #00f5d4;
    }
    section {
      margin: 20px;
      padding: 20px;
      background: #1a1a1a;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,255,200,0.2);
    }
    h2 {
      margin-top: 0;
    }
    button {
      background: #00f5d4;
      border: none;
      padding: 10px 20px;
      color: #000;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #00c2a8;
    }
    input, select, textarea {
      width: 95%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 5px;
      border: none;
      font-size: 1em;
    }
    .output {
      margin-top: 10px;
      padding: 10px;
      background: #000;
      color: #0ff;
      border-radius: 5px;
      font-family: monospace;
      white-space: pre-wrap;
      max-height: 300px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <header>‚ö° Centrale Nucl√©aire M√©t√©o ‚Äì Console Admin</header>

  <!-- Bouton RUN -->
  <section>
    <h2>üöÄ Lancer un Run Global</h2>
    <button onclick="launchRun()">Lancer le moteur</button>
    <div id="runResult" class="output"></div>
  </section>

  <!-- Logs -->
  <section>
    <h2>üì° Logs moteur</h2>
    <button onclick="loadLogs()">Actualiser</button>
    <div id="logs" class="output"></div>
  </section>

  <!-- √âtat du moteur -->
  <section>
    <h2>üîß √âtat du moteur</h2>
    <button onclick="checkEngine()">V√©rifier</button>
    <div id="engineStatus" class="output"></div>
  </section>

  <!-- Checkup -->
  <section>
    <h2>‚úÖ Checkup zones</h2>
    <button onclick="checkCoverage()">V√©rifier zones</button>
    <div id="coverage" class="output"></div>
  </section>

  <!-- Alertes -->
  <section>
    <h2>‚ö†Ô∏è Alertes m√©t√©o</h2>
    <button onclick="loadAlerts()">Charger</button>
    <div id="alerts" class="output"></div>
  </section>

  <!-- Radar -->
  <section>
    <h2>üåç Radar m√©t√©o global</h2>
    <button onclick="loadRadar()">Afficher</button>
    <div id="radar" class="output"></div>
  </section>

  <!-- Actualit√©s m√©t√©o -->
  <section>
    <h2>üì∞ Actualit√©s m√©t√©o</h2>
    <button onclick="loadNews()">Charger</button>
    <div id="news" class="output"></div>
  </section>

  <!-- Utilisateurs -->
  <section>
    <h2>üë• Utilisateurs</h2>
    <button onclick="loadUsers()">Voir stats</button>
    <div id="users" class="output"></div>
  </section>

  <!-- Recherche ville/pays -->
  <section>
    <h2>üåê Rechercher une localit√© (zones couvertes)</h2>
    <input type="text" id="city" placeholder="Ville (ex: Marseille)">
    <select id="country">
      <option value="FR">France</option>
      <option value="BE">Belgique</option>
      <option value="DE">Allemagne</option>
      <option value="UK">Royaume-Uni</option>
      <option value="NO">Norv√®ge</option>
      <option value="SE">Su√®de</option>
      <option value="UA">Ukraine</option>
      <option value="US">√âtats-Unis</option>
    </select>
    <button onclick="searchForecast()">Chercher</button>
    <div id="forecastResult" class="output"></div>
  </section>

  <!-- Chat IA -->
  <section>
    <h2>ü§ñ Chat IA ‚Äì Moteur m√©t√©o nucl√©aire</h2>
    <textarea id="chatInput" rows="3" placeholder="Posez une question (ex: Quel temps demain √† Marseille ?)"></textarea>
    <button onclick="askChat()">Envoyer</button>
    <div id="chatReply" class="output"></div>
  </section>

  <script>
    async function launchRun() {
      const res = await fetch("/api/superforecast", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({})
      });
      document.getElementById("runResult").innerText = JSON.stringify(await res.json(), null, 2);
    }

    async function loadLogs() {
      const res = await fetch("/api/logs");
      document.getElementById("logs").innerText = JSON.stringify(await res.json(), null, 2);
    }

    async function checkEngine() {
      const res = await fetch("/api/checkup");
      document.getElementById("engineStatus").innerText = JSON.stringify(await res.json(), null, 2);
    }

    async function checkCoverage() {
      const res = await fetch("/api/checkup");
      document.getElementById("coverage").innerText = JSON.stringify(await res.json(), null, 2);
    }

    async function loadAlerts() {
      const res = await fetch("/api/alerts");
      document.getElementById("alerts").innerText = JSON.stringify(await res.json(), null, 2);
    }

    async function loadRadar() {
      const res = await fetch("/api/radar/Europe");
      document.getElementById("radar").innerText = JSON.stringify(await res.json(), null, 2);
    }

    async function loadNews() {
      const res = await fetch("/api/news");
      document.getElementById("news").innerText = JSON.stringify(await res.json(), null, 2);
    }

    async function loadUsers() {
      const res = await fetch("/api/users");
      document.getElementById("users").innerText = JSON.stringify(await res.json(), null, 2);
    }

    async function searchForecast() {
      const city = document.getElementById("city").value;
      const country = document.getElementById("country").value;
      const res = await fetch(`/api/forecast/${country}`);
      document.getElementById("forecastResult").innerText = JSON.stringify(await res.json(), null, 2);
    }

    async function askChat() {
      const question = document.getElementById("chatInput").value;
      const res = await fetch("/api/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: question })
      });
      document.getElementById("chatReply").innerText = JSON.stringify(await res.json(), null, 2);
    }
  </script>
</body>
</html>
